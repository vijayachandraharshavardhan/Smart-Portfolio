{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Smart Portfolio site{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark" style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <div class="container-fluid px-2 px-md-3">
      <a class="navbar-brand fw-bold" href="/" style="color: #ecf0f1; font-size: clamp(1rem, 3vw, 1.25rem); line-height: 1.2;">VIJAYA CHANDRA HARSHA VARDHAN</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" style="border: none; padding: 0.25rem 0.5rem;">
        <span class="navbar-toggler-icon" style="width: 1.2em; height: 1.2em;"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto align-items-center">
          <li class="nav-item me-2 me-md-3"><a class="nav-link" href="/" style="color: #ecf0f1; font-weight: 500; transition: color 0.3s ease; font-size: clamp(0.9rem, 2.5vw, 1rem); padding: 0.5rem 0.75rem;">Home</a></li>
          <li class="nav-item me-2 me-md-3"><a class="nav-link" href="/projects/" style="color: #ecf0f1; font-weight: 500; transition: color 0.3s ease; font-size: clamp(0.9rem, 2.5vw, 1rem); padding: 0.5rem 0.75rem;">Projects</a></li>
          <li class="nav-item me-2 me-md-3"><a class="nav-link" href="/about/" style="color: #ecf0f1; font-weight: 500; transition: color 0.3s ease; font-size: clamp(0.9rem, 2.5vw, 1rem); padding: 0.5rem 0.75rem;">About</a></li>
          <li class="nav-item me-2 me-md-3"><a class="nav-link" href="/admin/" style="color: #3498db; font-weight: 500; transition: color 0.3s ease; font-size: clamp(0.9rem, 2.5vw, 1rem); padding: 0.5rem 0.75rem;">Admin</a></li>
          {% if profile and profile.profile_image %}
            <li class="nav-item ms-2 ms-md-3">
              <img src="{{ profile.profile_image.url }}" alt="Profile" class="navbar-profile-img" style="width: clamp(32px, 8vw, 40px); height: clamp(32px, 8vw, 40px); border-radius: 50%; object-fit: cover; border: 2px solid #3498db; transition: border-color 0.3s ease; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#profileModal">
            </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <main class="container py-5">
    {% block content %}{% endblock %}
  </main>

  <!-- Profile Modal -->
  <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content bg-dark text-white">
        <div class="modal-header border-0">
          <h5 class="modal-title" id="profileModalLabel" style="font-size: clamp(1.1rem, 3vw, 1.5rem);">Profile</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center p-3 p-md-4">
          {% if profile and profile.profile_image %}
            <img src="{{ profile.profile_image.url }}" alt="Profile" class="rounded-circle mb-3 mb-md-4" style="width: clamp(100px, 20vw, 120px); height: clamp(100px, 20vw, 120px); object-fit: cover; border: 3px solid #3498db;">
          {% else %}
            <div class="bg-secondary rounded-circle d-inline-flex align-items-center justify-content-center mb-3 mb-md-4" style="width: clamp(100px, 20vw, 120px); height: clamp(100px, 20vw, 120px);">
              <i class="fas fa-user fa-3x text-white"></i>
            </div>
          {% endif %}
          <h4 class="mb-1 mb-md-2" style="font-size: clamp(1.2rem, 4vw, 1.5rem);">{{ profile.name|default:"Profile" }}</h4>
          <p class="text-muted mb-3 mb-md-4" style="font-size: clamp(0.9rem, 2.5vw, 1.1rem);">{{ profile.title|default:"Title" }}</p>
          <p class="small mb-3 mb-md-4" style="font-size: clamp(0.85rem, 2vw, 1rem);">{{ profile.about_me|truncatewords:30|default:"About me" }}</p>
          <div class="mt-3 mt-md-4 d-flex flex-column flex-sm-row justify-content-center gap-2">
            {% if profile and profile.email %}
              <a href="mailto:{{ profile.email }}" class="btn btn-outline-light" style="font-size: clamp(0.85rem, 2vw, 0.95rem);"><i class="fas fa-envelope me-1"></i>Email</a>
            {% endif %}
            {% if profile and profile.linkedin %}
              <a href="{{ profile.linkedin }}" target="_blank" class="btn btn-outline-light" style="font-size: clamp(0.85rem, 2vw, 0.95rem);"><i class="fab fa-linkedin me-1"></i>LinkedIn</a>
            {% endif %}
            {% if profile and profile.github %}
              <a href="{{ profile.github }}" target="_blank" class="btn btn-outline-light" style="font-size: clamp(0.85rem, 2vw, 0.95rem);"><i class="fab fa-github me-1"></i>GitHub</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Video Modal -->
  <div class="modal fade" id="videoModal" tabindex="-1" aria-labelledby="videoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-xl">
      <div class="modal-content bg-dark">
        <div class="modal-header border-0">
          <h5 class="modal-title text-white" id="videoModalLabel" style="font-size: clamp(1.1rem, 3vw, 1.5rem);">Project Demo</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-0">
          <video id="projectVideo" controls class="w-100" style="max-height: clamp(50vh, 70vh, 80vh);">
            Your browser does not support the video tag.
          </video>
        </div>
      </div>
    </div>
  </div>

  <footer class="bg-dark text-light text-center py-3 py-md-4">
    <small style="font-size: clamp(0.8rem, 2vw, 0.875rem);">Â© {% now 'Y' %} Vijaya Chandra Harsha Vardhan Battu</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Global video modal functionality
    function playProjectVideo(videoUrl, title) {
      const videoModal = new bootstrap.Modal(document.getElementById('videoModal'));
      const videoElement = document.getElementById('projectVideo');
      const modalTitle = document.getElementById('videoModalLabel');

      modalTitle.textContent = title + ' - Demo Video';
      videoElement.src = videoUrl;

      videoModal.show();

      // Auto-play video when modal is shown
      videoModal._element.addEventListener('shown.bs.modal', function () {
        videoElement.play();
      });

      // Stop video when modal is hidden
      videoModal._element.addEventListener('hidden.bs.modal', function () {
        videoElement.pause();
        videoElement.currentTime = 0;
        videoElement.src = '';
      });
    }
  </script>
</body>
</html>
